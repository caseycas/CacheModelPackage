package clojure . asm ; public class Attribute { public final String type ; byte [ ] value ; Attribute next ; protected Attribute ( final String type ) { this . type = type ; } public boolean isUnknown ( ) { return true ; } public boolean isCodeAttribute ( ) { return false ; } protected Label [ ] getLabels ( ) { return null ; } protected Attribute read ( final ClassReader cr , final int off , final int len , final char [ ] buf , final int codeOff , final Label [ ] labels ) { Attribute attr = new Attribute ( type ) ; attr . value = new byte [ len ] ; System . arraycopy ( cr . b , off , attr . value , <int> , len ) ; return attr ; } protected ByteVector write ( final ClassWriter cw , final byte [ ] code , final int len , final int maxStack , final int maxLocals ) { ByteVector v = new ByteVector ( ) ; v . data = value ; v . length = value . length ; return v ; } final int getCount ( ) { int count = <int> ; Attribute attr = this ; while ( attr ! = null ) { count + = <int> ; attr = attr . next ; } return count ; } final int getSize ( final ClassWriter cw , final byte [ ] code , final int len , final int maxStack , final int maxLocals ) { Attribute attr = this ; int size = <int> ; while ( attr ! = null ) { cw . newUTF8 ( attr . type ) ; size + = attr . write ( cw , code , len , maxStack , maxLocals ) . length + <int> ; attr = attr . next ; } return size ; } final void put ( final ClassWriter cw , final byte [ ] code , final int len , final int maxStack , final int maxLocals , final ByteVector out ) { Attribute attr = this ; while ( attr ! = null ) { ByteVector b = attr . write ( cw , code , len , maxStack , maxLocals ) ; out . putShort ( cw . newUTF8 ( attr . type ) ) . putInt ( b . length ) ; out . putByteArray ( b . data , <int> , b . length ) ; attr = attr . next ; } } } 
