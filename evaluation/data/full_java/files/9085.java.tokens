package org . elasticsearch . test . test ; import org . elasticsearch . Version ; import org . elasticsearch . test . ESTestCase ; import org . elasticsearch . test . VersionUtils ; import java . util . List ; public class VersionUtilsTests extends ESTestCase { public void testAllVersionsSorted ( ) { List < Version > allVersions = VersionUtils . allVersions ( ) ; for ( int i = <int> , j = <int> ; j < allVersions . size ( ) ; + + i , + + j ) { assertTrue ( allVersions . get ( i ) . before ( allVersions . get ( j ) ) ) ; } } public void testRandomVersionBetween ( ) { Version got = VersionUtils . randomVersionBetween ( random ( ) , VersionUtils . getFirstVersion ( ) , Version . CURRENT ) ; assertTrue ( got . onOrAfter ( VersionUtils . getFirstVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( Version . CURRENT ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , null , Version . CURRENT ) ; assertTrue ( got . onOrAfter ( VersionUtils . getFirstVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( Version . CURRENT ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , VersionUtils . getFirstVersion ( ) , null ) ; assertTrue ( got . onOrAfter ( VersionUtils . getFirstVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( Version . CURRENT ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , Version . V_0_90_12 , Version . V_1_4_5 ) ; assertTrue ( got . onOrAfter ( Version . V_0_90_12 ) ) ; assertTrue ( got . onOrBefore ( Version . V_1_4_5 ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , null , Version . V_1_4_5 ) ; assertTrue ( got . onOrAfter ( VersionUtils . getFirstVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( Version . V_1_4_5 ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , null , VersionUtils . allVersions ( ) . get ( <int> ) ) ; assertTrue ( got . onOrAfter ( VersionUtils . getFirstVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( VersionUtils . allVersions ( ) . get ( <int> ) ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , Version . V_0_90_12 , null ) ; assertTrue ( got . onOrAfter ( Version . V_0_90_12 ) ) ; assertTrue ( got . onOrBefore ( Version . CURRENT ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , VersionUtils . getPreviousVersion ( ) , null ) ; assertTrue ( got . onOrAfter ( VersionUtils . getPreviousVersion ( ) ) ) ; assertTrue ( got . onOrBefore ( Version . CURRENT ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , VersionUtils . getFirstVersion ( ) , VersionUtils . getFirstVersion ( ) ) ; assertEquals ( got , VersionUtils . getFirstVersion ( ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , Version . CURRENT , Version . CURRENT ) ; assertEquals ( got , Version . CURRENT ) ; got = VersionUtils . randomVersionBetween ( random ( ) , Version . V_1_2_4 , Version . V_1_2_4 ) ; assertEquals ( got , Version . V_1_2_4 ) ; got = VersionUtils . randomVersionBetween ( random ( ) , null , VersionUtils . getFirstVersion ( ) ) ; assertEquals ( got , VersionUtils . getFirstVersion ( ) ) ; got = VersionUtils . randomVersionBetween ( random ( ) , Version . CURRENT , null ) ; assertEquals ( got , Version . CURRENT ) ; } } 
