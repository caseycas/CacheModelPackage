package com . badlogic . gdx . input ; import java . io . DataOutputStream ; import java . net . Socket ; import com . badlogic . gdx . Gdx ; import com . badlogic . gdx . Input . Peripheral ; import com . badlogic . gdx . InputProcessor ; public class RemoteSender implements InputProcessor { private DataOutputStream out ; private boolean connected = false ; public static final int KEY_DOWN = <int> ; public static final int KEY_UP = <int> ; public static final int KEY_TYPED = <int> ; public static final int TOUCH_DOWN = <int> ; public static final int TOUCH_UP = <int> ; public static final int TOUCH_DRAGGED = <int> ; public static final int ACCEL = <int> ; public static final int COMPASS = <int> ; public static final int SIZE = <int> ; public RemoteSender ( String ip , int port ) { try { Socket socket = new Socket ( ip , port ) ; socket . setTcpNoDelay ( true ) ; socket . setSoTimeout ( <int> ) ; out = new DataOutputStream ( socket . getOutputStream ( ) ) ; out . writeBoolean ( Gdx . input . isPeripheralAvailable ( Peripheral . MultitouchScreen ) ) ; connected = true ; Gdx . input . setInputProcessor ( this ) ; } catch ( Exception e ) { Gdx . app . log ( <str> , <str> + ip + <str> + port ) ; } } public void sendUpdate ( ) { synchronized ( this ) { if ( ! connected ) return ; } try { out . writeInt ( ACCEL ) ; out . writeFloat ( Gdx . input . getAccelerometerX ( ) ) ; out . writeFloat ( Gdx . input . getAccelerometerY ( ) ) ; out . writeFloat ( Gdx . input . getAccelerometerZ ( ) ) ; out . writeInt ( COMPASS ) ; out . writeFloat ( Gdx . input . getAzimuth ( ) ) ; out . writeFloat ( Gdx . input . getPitch ( ) ) ; out . writeFloat ( Gdx . input . getRoll ( ) ) ; out . writeInt ( SIZE ) ; out . writeFloat ( Gdx . graphics . getWidth ( ) ) ; out . writeFloat ( Gdx . graphics . getHeight ( ) ) ; } catch ( Throwable t ) { out = null ; connected = false ; } } @Override public boolean keyDown ( int keycode ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( KEY_DOWN ) ; out . writeInt ( keycode ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean keyUp ( int keycode ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( KEY_UP ) ; out . writeInt ( keycode ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean keyTyped ( char character ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( KEY_TYPED ) ; out . writeChar ( character ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean touchDown ( int x , int y , int pointer , int button ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( TOUCH_DOWN ) ; out . writeInt ( x ) ; out . writeInt ( y ) ; out . writeInt ( pointer ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean touchUp ( int x , int y , int pointer , int button ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( TOUCH_UP ) ; out . writeInt ( x ) ; out . writeInt ( y ) ; out . writeInt ( pointer ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean touchDragged ( int x , int y , int pointer ) { synchronized ( this ) { if ( ! connected ) return false ; } try { out . writeInt ( TOUCH_DRAGGED ) ; out . writeInt ( x ) ; out . writeInt ( y ) ; out . writeInt ( pointer ) ; } catch ( Throwable t ) { synchronized ( this ) { connected = false ; } } return false ; } @Override public boolean mouseMoved ( int x , int y ) { return false ; } @Override public boolean scrolled ( int amount ) { return false ; } public boolean isConnected ( ) { synchronized ( this ) { return connected ; } } } 
