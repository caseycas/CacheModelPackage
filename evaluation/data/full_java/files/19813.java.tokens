package io . netty . example . http . upload ; import io . netty . channel . ChannelHandlerContext ; import io . netty . channel . SimpleChannelInboundHandler ; import io . netty . handler . codec . http . HttpContent ; import io . netty . handler . codec . http . HttpUtil ; import io . netty . handler . codec . http . HttpObject ; import io . netty . handler . codec . http . HttpResponse ; import io . netty . handler . codec . http . LastHttpContent ; import io . netty . util . CharsetUtil ; public class HttpUploadClientHandler extends SimpleChannelInboundHandler < HttpObject > { private boolean readingChunks ; @Override public void channelRead0 ( ChannelHandlerContext ctx , HttpObject msg ) { if ( msg instanceof HttpResponse ) { HttpResponse response = ( HttpResponse ) msg ; System . err . println ( <str> + response . status ( ) ) ; System . err . println ( <str> + response . protocolVersion ( ) ) ; if ( ! response . headers ( ) . isEmpty ( ) ) { for ( CharSequence name : response . headers ( ) . names ( ) ) { for ( CharSequence value : response . headers ( ) . getAll ( name ) ) { System . err . println ( <str> + name + <str> + value ) ; } } } if ( response . status ( ) . code ( ) = = <int> & & HttpUtil . isTransferEncodingChunked ( response ) ) { readingChunks = true ; System . err . println ( <str> ) ; } else { System . err . println ( <str> ) ; } } if ( msg instanceof HttpContent ) { HttpContent chunk = ( HttpContent ) msg ; System . err . println ( chunk . content ( ) . toString ( CharsetUtil . UTF_8 ) ) ; if ( chunk instanceof LastHttpContent ) { if ( readingChunks ) { System . err . println ( <str> ) ; } else { System . err . println ( <str> ) ; } readingChunks = false ; } else { System . err . println ( chunk . content ( ) . toString ( CharsetUtil . UTF_8 ) ) ; } } } @Override public void exceptionCaught ( ChannelHandlerContext ctx , Throwable cause ) { cause . printStackTrace ( ) ; ctx . channel ( ) . close ( ) ; } } 
