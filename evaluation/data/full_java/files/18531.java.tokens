package com . badlogic . gdx . tests ; import java . util . Random ; import com . badlogic . gdx . Gdx ; import com . badlogic . gdx . Input . Keys ; import com . badlogic . gdx . graphics . Camera ; import com . badlogic . gdx . graphics . Color ; import com . badlogic . gdx . graphics . GL20 ; import com . badlogic . gdx . graphics . PerspectiveCamera ; import com . badlogic . gdx . graphics . Texture ; import com . badlogic . gdx . graphics . g2d . BitmapFont ; import com . badlogic . gdx . graphics . g2d . SpriteBatch ; import com . badlogic . gdx . graphics . g2d . TextureRegion ; import com . badlogic . gdx . graphics . g3d . Model ; import com . badlogic . gdx . graphics . g3d . ModelBatch ; import com . badlogic . gdx . graphics . g3d . ModelInstance ; import com . badlogic . gdx . graphics . g3d . attributes . ColorAttribute ; import com . badlogic . gdx . graphics . g3d . loader . ObjLoader ; import com . badlogic . gdx . math . Vector3 ; import com . badlogic . gdx . tests . utils . GdxTest ; public class ProjectTest extends GdxTest { Model sphere ; Camera cam ; SpriteBatch batch ; BitmapFont font ; ModelInstance [ ] instances = new ModelInstance [ <int> ] ; ModelBatch modelBatch ; Vector3 tmp = new Vector3 ( ) ; TextureRegion logo ; @Override public void create ( ) { ObjLoader objLoader = new ObjLoader ( ) ; sphere = objLoader . loadModel ( Gdx . files . internal ( <str> ) ) ; sphere . materials . get ( <int> ) . set ( new ColorAttribute ( ColorAttribute . Diffuse , Color . WHITE ) ) ; cam = new PerspectiveCamera ( <int> , Gdx . graphics . getWidth ( ) , Gdx . graphics . getHeight ( ) ) ; cam . far = <int> ; Random rand = new Random ( ) ; for ( int i = <int> ; i < instances . length ; i + + ) { instances [ i ] = new ModelInstance ( sphere , rand . nextFloat ( ) * <int> - rand . nextFloat ( ) * <int> , rand . nextFloat ( ) * <int> - rand . nextFloat ( ) * <int> , rand . nextFloat ( ) * - <int> - <int> ) ; } batch = new SpriteBatch ( ) ; font = new BitmapFont ( ) ; logo = new TextureRegion ( new Texture ( Gdx . files . internal ( <str> ) ) ) ; modelBatch = new ModelBatch ( ) ; } @Override public void render ( ) { Gdx . gl . glClear ( GL20 . GL_COLOR_BUFFER_BIT | GL20 . GL_DEPTH_BUFFER_BIT ) ; Gdx . gl . glEnable ( GL20 . GL_DEPTH_TEST ) ; cam . update ( ) ; modelBatch . begin ( cam ) ; int visible = <int> ; for ( int i = <int> ; i < instances . length ; i + + ) { instances [ i ] . transform . getTranslation ( tmp ) ; if ( cam . frustum . sphereInFrustum ( tmp , <int> ) ) { ( ( ColorAttribute ) instances [ i ] . materials . get ( <int> ) . get ( ColorAttribute . Diffuse ) ) . color . set ( Color . WHITE ) ; visible + + ; } else { ( ( ColorAttribute ) instances [ i ] . materials . get ( <int> ) . get ( ColorAttribute . Diffuse ) ) . color . set ( Color . RED ) ; } modelBatch . render ( instances [ i ] ) ; } modelBatch . end ( ) ; if ( Gdx . input . isKeyPressed ( Keys . A ) ) cam . rotate ( <int> * Gdx . graphics . getDeltaTime ( ) , <int> , <int> , <int> ) ; if ( Gdx . input . isKeyPressed ( Keys . D ) ) cam . rotate ( - <int> * Gdx . graphics . getDeltaTime ( ) , <int> , <int> , <int> ) ; Gdx . gl . glDisable ( GL20 . GL_DEPTH_TEST ) ; batch . begin ( ) ; for ( int i = <int> ; i < instances . length ; i + + ) { instances [ i ] . transform . getTranslation ( tmp ) ; cam . project ( tmp ) ; if ( tmp . z < <int> ) continue ; batch . draw ( logo , tmp . x , tmp . y ) ; } batch . end ( ) ; } } 
